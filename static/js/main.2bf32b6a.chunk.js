(this.webpackJsonprooster_react=this.webpackJsonprooster_react||[]).push([[0],{156:function(e,a,t){e.exports=t(209)},163:function(e,a,t){},209:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(15),o=t.n(l),c=t(122),i=t.n(c),s=t(14),m=t(41),u=t(135),d=t.n(u),p=(t(163),t(242)),E=t(90),g=t.n(E),b=t(12),f=t(246),h=t(13),y=t.n(h),v=t(249),O=t(251),S=t(250),j=t(138),N=t(23),I=t.n(N),C=t(65),x=t.n(C),T=t(11),w=t(16),A=t.n(w),k=function(e){return function(a){A.a.get("/scream/".concat(e,"/like")).then((function(e){a({type:"LIKE_SCREAM",payload:e.data})})).catch((function(e){console.log(e)}))}},R=function(e){return function(a){A.a.get("/scream/".concat(e,"/unlike")).then((function(e){a({type:"UNLIKE_SCREAM",payload:e.data})})).catch((function(e){console.log(e)}))}},D=function(){return function(e){e({type:"CLEAR_ERRORS"})}},U=t(53),_=t.n(U),F=t(260),M=t(240);var L=function(e){var a=e.children,t=e.onClick,n=e.tipTitle,l=e.placement,o=e.tipClassName,c=e.btnClassName;return r.a.createElement(F.a,{title:n,className:o,placement:l},r.a.createElement(M.a,{className:c,onClick:t},a))},W=t(70),B=t.n(W),Y=t(94),P=t.n(Y);var H={likeScream:k,unlikeScream:R},G=Object(T.b)((function(e){return{user:e.user}}),H)(y()({})((function(e){var a=e.user.authenticated?e.user.likes&&e.user.likes.find((function(a){return a.screamId===e.screamId}))?r.a.createElement(L,{tipTitle:"Unlike Scream",onClick:function(){e.unlikeScream(e.screamId)}},r.a.createElement(B.a,null)):r.a.createElement(L,{tipTitle:"Like Scream",onClick:function(){e.likeScream(e.screamId)}},r.a.createElement(P.a,null)):r.a.createElement(L,{tipTitle:"like"},r.a.createElement(s.b,{to:"/login"},r.a.createElement(P.a,{color:"primary"})));return r.a.createElement(n.Fragment,null,a)}))),z=t(259),K=t(243),V=t(244),J=t(129),$=t.n(J),q=t(245);var Q={deleteScream:function(e){return function(a){console.log(e),A.a.delete("/scream/".concat(e)).then((function(){a({type:"DELETE_SCREAM",payload:e})})).catch((function(e){console.log(e)}))}}},X=Object(T.b)(null,Q)(y()({deleteButton:{top:"10%",left:"90%",position:"absolute"}})((function(e){var a=r.a.useState(!1),t=Object(b.a)(a,2),n=t[0],l=t[1],o=function(){l(!1)},c=e.classes;return r.a.createElement("div",null,r.a.createElement(L,{tipTitle:"Delete Scream",style:{float:"right"},onClick:function(){l(!0)},btnClassName:c.deleteButton},r.a.createElement($.a,{color:"secondary"})),r.a.createElement(z.a,{open:n,onClose:o,fullWidth:!0,maxWidth:"sm"},r.a.createElement(K.a,null,"Are you Sure?"),r.a.createElement(V.a,null,r.a.createElement(q.a,{onClick:o,color:"primary"},"Cancel"),r.a.createElement(q.a,{onClick:function(){e.deleteScream(e.screamId),l(!1)},color:"primary"},"Delete"))))}))),Z=t(6),ee=t(248),ae=t(130),te=t.n(ae);var ne=y()((function(e){return Object(Z.a)({},e.spreadableObject,{commentImage:{maxWidth:100,height:100,objectFit:"cover",borderRadius:"50%"},commentData:{marginLeft:"20px"}})}))((function(e){console.log(e);var a=e.comments,t=e.classes;return r.a.createElement(f.a,{container:!0},a.map((function(e,l){var o=e.body,c=e.createdAt,i=e.userImage,m=e.userHandle;return r.a.createElement(n.Fragment,{key:c},r.a.createElement(f.a,{item:!0,sm:12},r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,sm:2},r.a.createElement("img",{src:i,alt:"User Image",className:t.commentImage})),r.a.createElement(f.a,{item:!0,sm:9},r.a.createElement("div",{className:t.commentData},r.a.createElement(j.a,{variant:"h5",component:s.b,to:"/users/".concat(m),color:"primary"},m),r.a.createElement(j.a,{variant:"body2",color:"primary"},I()(c).format("h:mm a, MMMM DD YYYY")),r.a.createElement("hr",{className:t.invisibleSeparator}),r.a.createElement(j.a,{variant:"body2",color:"primary"},o," "))))),l!==a.length-1?r.a.createElement("hr",{className:t.visibleSeparator}):r.a.createElement("span",null))})))})),re=t(74),le=t.n(re),oe=t(247),ce=t(8),ie=t(256);var se={postComment:function(e,a){return function(t){A.a.post("/scream/".concat(e,"/comment"),a).then((function(e){t({type:"POST_COMMENT",payload:e.data}),t(D())})).catch((function(e){t({type:"SET_ERRORS",payload:e.response.data})}))}}},me=Object(T.b)((function(e){return{UI:e.ui,authenticated:e.user.authenticated,scream:e.data.scream}}),se)(y()((function(e){return Object(Z.a)({},e.spreadableObject)}))((function(e){var a=e.classes,t=Object(n.useState)({body:"",errors:{}}),l=Object(b.a)(t,2),o=l[0],c=l[1],i=e.authenticated?r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{item:!0,sm:12,style:{textAlign:"center",paddingLeft:20,paddingRight:20,backgroundColor:"#dfe3eb"}},r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),""!==o.body?(e.postComment(e.screamId,{body:o.body}),c(Object(Z.a)({},o,{body:"",errors:{}}))):c(Object(Z.a)({},o,{errors:{body:"Comment Cannot be Empty"}}))}},r.a.createElement(ie.a,{margin:"dense",autoFocus:!0,id:"body",name:"body",label:"Enter Comment Here",onChange:function(e){c(Object(Z.a)({},o,Object(ce.a)({},e.target.name,e.target.value)))},type:"text",className:a.TextField,fullWidth:!0,value:o.body,style:{},error:!!o.errors.body,helperText:o.errors.body}),r.a.createElement(q.a,{type:"submit",variant:"contained",style:{marginTop:15,marginBottom:15},color:"primary",className:a.button},"SUBMIT")))):null;return r.a.createElement("div",null,i)})));var ue={getScream:function(e){return function(a){a({type:"LOADING_UI"}),A.a.get("/scream/".concat(e)).then((function(e){a({type:"SET_SCREAM",payload:e.data}),a({type:"STOP_LOADING_UI"})})).catch((function(e){console.log(e)}))}}},de=Object(T.b)((function(e){return{UI:e.ui,scream:e.data.scream,screams:e.data.screams}}),ue)(y()((function(e){return Object(Z.a)({},e.spreadableObject,{postDialog:{position:"relative"},closeIcon:{top:"10%",left:"90%",position:"absolute"},profileImage:{maxWidth:200,height:200,borderRadius:"50%",objectFit:"cover"},dialogContent:{padding:"20px"},expandButton:{position:"absolute",left:"90%"}})}))((function(e){var a=Object(n.useState)({body:"",errors:{}}),t=Object(b.a)(a,2),l=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(b.a)(c,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(b.a)(d,2),E=p[0],g=p[1];Object(n.useEffect)((function(){e.openDialog&&h()}),[m]);var h=function(){u(!0),e.getScream(e.screamId);var a=window.location.pathname;console.log(a);var t="/users/".concat(e.userHandle,"/screams/").concat(e.screamId);g(a===t?"/users/".concat(e.userHandle):window.location.pathname),console.log(t),window.history.pushState(null,null,t)},y=function(){console.log(E),window.history.pushState(null,null,E),o(Object(Z.a)({},l,{body:"",errors:{}})),u(!1)},v=e.classes,O=e.scream,S=e.UI.loading?r.a.createElement("div",{style:{textAlign:"center",marginTop:"50",marginBottom:"50"}}," ",r.a.createElement(oe.a,{size:200,thickness:2})," "):r.a.createElement(f.a,{container:!0,spacing:2},r.a.createElement(f.a,{item:!0,sm:5},r.a.createElement("img",{src:O.userImage,alt:"Profile",className:v.profileImage})),r.a.createElement(f.a,{item:!0,sm:7},r.a.createElement(j.a,{component:s.b,color:"primary",variant:"h5",to:"/users/".concat(O.userHandle)},"@",O.userHandle),r.a.createElement("hr",{className:v.invisibleSeparator}),r.a.createElement(j.a,{color:"primary",variant:"body2"},I()(O.createdAt).format("h:mm a, MMMM DD YYYY")),r.a.createElement("hr",{className:v.invisibleSeparator}),r.a.createElement(j.a,{color:"primary",variant:"body1"},O.body),r.a.createElement(G,{screamId:e.screamId}),r.a.createElement("span",null,e.scream.likeCount," Likes"),r.a.createElement(L,{tipTitle:"Comments"},r.a.createElement(_.a,{color:"primary"})),r.a.createElement("span",null,e.scream.commentCount," Comments")),r.a.createElement(ne,{comments:e.scream.comments}));return r.a.createElement(n.Fragment,null,r.a.createElement(L,{tipTitle:"Expand Scream",onClick:h,tipClassName:v.expandButton},r.a.createElement(te.a,{color:"secondary"})),r.a.createElement(z.a,{open:m,onClose:y,fullWidth:!0,maxWidth:"sm",className:v.postDialog},r.a.createElement(K.a,null,"Scream Details"),r.a.createElement(le.a,{onClick:y,className:v.closeIcon}),r.a.createElement(ee.a,{className:v.dialogContent},S),r.a.createElement(me,{screamId:e.screamId})))})));var pe={likeScream:k,unlikeScream:R},Ee=Object(T.b)((function(e){return{user:e.user,screams:e.data.screams}}),pe)(y()({card:{position:"relative",display:"flex",marginBottom:20},image:{minWidth:200},content:{padding:25,objectFit:"cover",display:"block"}})((function(e){var a=e.classes,t=e.screamData.userImage,n=e.screamData.userHandle,l=e.screamData.body,o=e.screamData.createdAt,c=e.screamData.likeCount,i=e.screamData.commentCount,m=e.screamData.screamId,u=e.user.authenticated,d=e.user.credentials.handle;I.a.extend(x.a);var p=u&&n===d?r.a.createElement(X,{screamId:m}):null;return r.a.createElement("div",null,r.a.createElement(v.a,{className:a.card},r.a.createElement(S.a,{image:t,title:"Profile Image",className:a.image}),r.a.createElement(O.a,{className:a.content},r.a.createElement(j.a,{varinat:"h3",component:s.b,to:"/users/".concat(n),color:"primary"},n),p,r.a.createElement("br",null),r.a.createElement(j.a,{varinat:"body2",color:"textSecondary"},I()(o).fromNow()),r.a.createElement("br",null),r.a.createElement(j.a,{varinat:"h5",color:"textPrimary"},l),r.a.createElement(G,{screamId:m}),r.a.createElement("span",null,c," Likes"),r.a.createElement(L,{tipTitle:"Comments"},r.a.createElement(_.a,{color:"primary"})),r.a.createElement("span",null,i," Comments"),r.a.createElement(de,{screamId:m,userHandle:n,likeCount:c,commentCount:i,openDialog:e.openDialog}))))}))),ge=t(252),be=t(77),fe=t.n(be),he=t(78),ye=t.n(he),ve=t(76),Oe=t.n(ve),Se=t(131),je=t.n(Se),Ne=t(79),Ie=t.n(Ne),Ce=t(137),xe=t(75),Te=t.n(xe);var we=y()({imageWrapper:{textAlign:"center",position:"relative"},profileImage:{width:150,height:150,objectFit:"cover",maxWidth:"100%",borderRadius:"50%"},fullline:{height:15,width:"80%",marginBottom:10,backgroundColor:"rgba(0,0,0,0.6)",margin:15},halfline:{height:15,width:"80%",marginBottom:10,backgroundColor:"rgba(0,0,0,0.4)",margin:15},date:{height:14,width:100,backgroundColor:"rgba(0,0,0,0.3)",margin:15},profile:{padding:20}})((function(e){var a=e.classes;return r.a.createElement("div",null,r.a.createElement(Ce.a,{className:a.paper},r.a.createElement("div",{className:a.profile},r.a.createElement("div",{className:a.imageWrapper,style:{textAlign:"center"}},r.a.createElement("img",{src:Te.a,className:a.profileImage,alt:""})),r.a.createElement("br",null),r.a.createElement("div",{className:a.handle}),r.a.createElement("div",{className:a.date}),r.a.createElement("div",{className:a.fullline}),r.a.createElement("div",{className:a.halfline}))),";")})),Ae=function(){return function(e){localStorage.removeItem("FbIdToken"),delete A.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"})}},ke=function(){return function(e){e({type:"LOADING_USER"}),A.a.get("/user").then((function(a){e({type:"SET_USER",payload:a.data})})).catch((function(e){return console.log(e)}))}};var Re={editUserDetails:function(e){return function(a){console.log(e),a({type:"LOADING_USER"}),A.a.post("/user",e).then((function(e){a(ke())})).catch((function(e){return console.log(e)}))}}},De=Object(T.b)((function(e){return{credentials:e.user.credentials}}),Re)(y()((function(e){return Object(Z.a)({},e.spreadThis)}))((function(e){var a=Object(n.useState)({bio:"",website:"",location:"",open:!1}),t=Object(b.a)(a,2),l=t[0],o=t[1],c=r.a.useState(!1),i=Object(b.a)(c,2),s=i[0],m=i[1],u=e.classes,d=function(){m(!1)},p=function(e){o(Object(Z.a)({},l,Object(ce.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){o(Object(Z.a)({},l,{bio:e.credentials.bio?e.credentials.bio:"",website:e.credentials.website?e.credentials.website:"",location:e.credentials.location?e.credentials.location:""}))}),[e.credentials]),r.a.createElement("div",null,r.a.createElement(L,{tipTitle:"Edit Details",tipPlacement:"top",onClick:function(){m(!0)},btnClassName:"button"},r.a.createElement(Oe.a,{color:"primary"})),r.a.createElement(z.a,{open:s,onClose:d,"aria-labelledby":"form-dialog-title",maxWidth:"sm"},r.a.createElement(K.a,{id:"form-dialog-title"},"Edit Details"),r.a.createElement(ee.a,null,r.a.createElement(ie.a,{margin:"dense",autoFocus:!0,id:"bio",name:"bio",label:"Bio",onChange:p,type:"text",className:u.TextField,fullWidth:!0,value:l.bio}),r.a.createElement(ie.a,{margin:"dense",id:"website",name:"website",label:"Website",onChange:p,className:u.TextField,type:"text",fullWidth:!0,value:l.website}),r.a.createElement(ie.a,{margin:"dense",id:"location",name:"location",label:"Location",onChange:p,className:u.TextField,type:"text",fullWidth:!0,value:l.location})),r.a.createElement(V.a,null,r.a.createElement(q.a,{onClick:d,color:"primary"},"Cancel"),r.a.createElement(q.a,{onClick:function(){var a={bio:l.bio,website:l.website,location:l.location};e.editUserDetails(a),d()},color:"primary"},"Submit"))))})));var Ue={logoutUser:Ae,uploadImage:function(e){return function(a){a({type:"LOADING_USER"}),console.log(e),A.a.post("/user/image",e).then((function(e){a(ke())})).catch((function(e){return console.log(e)}))}}},_e=Object(T.b)((function(e){return{user:e.user}}),Ue)(y()((function(e){return Object(Z.a)({},e.spreadThis,{paper:{padding:20},profile:{"& .image-wrapper":{textAlign:"center",position:"relative","& button":{position:"absolute",top:"80%",left:"70%"}},"& .profile-image":{width:150,height:150,objectFit:"cover",maxWidth:"100%",borderRadius:"50%"},"& .profile-details":{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:e.palette.primary.main}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}}})}))((function(e){console.log(e.user.authenticated),console.log(e.user.loading);var a,t=e.classes;a=Object(Z.a)({},e.user.credentials,{loading:e.user.loading}),console.log(a);var l=r.a.createElement(Ce.a,{className:t.paper},r.a.createElement("div",{className:t.profile},r.a.createElement("div",{className:"image-wrapper",style:{textAlign:"center"}},r.a.createElement("img",{src:a.imageUrl,className:"profile-image",alt:""}),r.a.createElement("input",{type:"file",id:"profileImageUpload",onChange:function(a){var t=a.target.files[0],n=new FormData;n.append("image",t,t.name),e.uploadImage(n),console.log(n)},hidden:"hidden"}),r.a.createElement(L,{tipTitle:"Edit",tipPlacement:"top",onClick:function(){document.getElementById("profileImageUpload").click()},btnClassName:"button"},r.a.createElement(Oe.a,{color:"primary"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"profile-details",style:{textAlign:"center"}},r.a.createElement(ge.a,{component:s.b,to:"/users/".concat(a.handle),color:"primary",variant:"h6"},"@",a.handle),a.bio&&r.a.createElement(j.a,{variant:"body2"},a.bio),r.a.createElement("br",null),a.location&&r.a.createElement(n.Fragment,null,r.a.createElement(fe.a,{color:"primary"}),r.a.createElement("span",null,a.location)),r.a.createElement("br",null),a.website&&r.a.createElement(n.Fragment,null,r.a.createElement(ye.a,{color:"primary"}),r.a.createElement("a",{href:a.website,target:"_blank",rel:"noopener noreferrer"}," ",a.website)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Ie.a,{color:"primary"}),r.a.createElement("span",null,I()(a.createdAt).format("MMM YYYY"))),r.a.createElement(De,null),r.a.createElement(L,{tipTitle:"Logout",tipPlacement:"top",onClick:function(){e.logoutUser()},btnClassName:"button"},r.a.createElement(je.a,{color:"primary"})))),o=r.a.createElement(Ce.a,{className:t.paper},r.a.createElement(j.a,{variant:"body2",align:"center"},"No Profile Found. Please Login Again"),r.a.createElement("div",{className:t.buttons},r.a.createElement(q.a,{variant:"contained",color:"primary",component:s.b,to:"/login"},"Login"),r.a.createElement(q.a,{variant:"contained",color:"primary",component:s.b,to:"/signup"},"signup")));return console.log(I()(a.createdAt).format("MMM YYYY")),r.a.createElement("div",null,a.loading?r.a.createElement(we,null):e.user.authenticated?l:o)})));var Fe=y()((function(e){return{card:{display:"flex",marginBottom:"20"},cardContent:{width:"100%",flexDirection:"column",padding:25},cover:{minWidth:200,objectFit:"cover"},handle:{width:60,height:20,backgroundColor:e.palette.primary.main,marginBottom:7},date:{height:14,width:100,backgroundColor:"rgba(0,0,0,0.3)",marginBottom:10},fullline:{height:15,width:"90%",marginBottom:10,backgroundColor:"rgba(0,0,0,0.6)"},halfline:{height:15,width:"50%",marginBottom:10,backgroundColor:"rgba(0,0,0,0.6)"}}}))((function(e){var a=e.classes,t=Array.from({length:5}).map((function(e,t){return r.a.createElement(v.a,{className:a.card,key:t},r.a.createElement(S.a,{className:a.cover,image:Te.a}),r.a.createElement(O.a,{className:a.CardContent},r.a.createElement("div",{className:a.handle}),r.a.createElement("div",{className:a.date}),r.a.createElement("div",{className:a.fullline}),r.a.createElement("div",{className:a.fullline}),r.a.createElement("div",{className:a.halfline})))}));return r.a.createElement(n.Fragment,null,t)})),Me=t(257);var Le={getScreams:function(){return function(e){e({type:"LOADING_DATA"}),console.log("getScreams Function"),A.a.get("/screams").then((function(a){console.log("GetScreams Then"),console.log(a.data),e({type:"SET_SCREAMS",payload:a.data})})).catch((function(a){e({type:"SET_SCREAMS",payload:[]})}))}}},We=Object(T.b)((function(e){return{data:e.data}}),Le)((function(e){var a,t,l=Object(n.useState)([]),o=Object(b.a)(l,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){e.getScreams()}),[]),t=e.data.loading,console.log(t),Object(n.useEffect)((function(){i(e.data.screams)}),[e.data.screams]),a=t?r.a.createElement(Fe,null):c.map((function(e){return r.a.createElement(Ee,{key:e.screamId,screamData:e})})),console.log("Home page"),r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,spacing:3,alignContent:"center",justify:"center"},r.a.createElement(f.a,{component:Me.a,item:!0,xs:11,display:{xs:"block",md:"none"}},r.a.createElement(_e,null)),r.a.createElement(f.a,{item:!0,sm:8,xs:11},a),r.a.createElement(f.a,{component:Me.a,item:!0,sm:4,display:{xs:"none",md:"block"}},r.a.createElement(_e,null))))})),Be=t(54),Ye=t.n(Be);var Pe={signUpUser:function(e,a){return function(t){t({type:"LOADING_UI"}),A.a.post("/signup",e).then((function(e){var n="Bearer ".concat(e.data.token);localStorage.setItem("FbIdToken",n),A.a.defaults.headers.common.Authorization=n,t(ke()),t({type:"CLEAR_ERRORS"}),a.push("/")})).catch((function(e){console.log(e.response.data),t({type:"SET_ERRORS",payload:e.response.data})}))}}},He=Object(T.b)((function(e){return{user:e.user,UI:e.ui}}),Pe)(y()((function(e){return Object(Z.a)({},e.spreadableObject)}))((function(e){var a=Object(n.useState)({email:"",password:"",password2:"",handle:"",loading:!1,errors:{}}),t=Object(b.a)(a,2),l=t[0],o=t[1];Object(n.useEffect)((function(){null!==e.UI.errors&&o(Object(Z.a)({},l,{errors:e.UI.errors}))}),[e.UI.errors]);var c=function(e){o(Object(Z.a)({},l,Object(ce.a)({},e.target.name,e.target.value)))},i=e.classes;return r.a.createElement(f.a,{container:!0,className:i.form,alignContent:"center",justify:"center"},r.a.createElement(f.a,{item:!0,sm:!0}),r.a.createElement(f.a,{item:!0,sm:!0,style:{paddingLeft:20,paddingRight:20}},r.a.createElement("img",{src:Ye.a,alt:"",width:"100",className:i.image}),r.a.createElement(j.a,{variant:"h4",className:i.pageTitle},"Sign Up"),r.a.createElement("form",{noValidate:!0,onSubmit:function(a){a.preventDefault();var t={email:l.email,password:l.password,confirmPassword:l.password2,handle:l.handle};console.log(t),console.log(l),e.signUpUser(t,e.history)},autoComplete:"off"},r.a.createElement(ie.a,{id:"email",name:"email",type:"email",helperText:l.errors.email,error:!!l.errors.email,label:"Email",className:i.textField,onChange:c,fullWidth:!0}),r.a.createElement(ie.a,{id:"password",name:"password",type:"password",helperText:l.errors.password,error:!!l.errors.password,label:"Password",className:i.textField,onChange:c,fullWidth:!0}),r.a.createElement(ie.a,{id:"password2",name:"password2",type:"password",helperText:l.errors.passwordMatch,error:!!l.errors.passwordMatch,label:"Confirm Password",className:i.textField,onChange:c,fullWidth:!0}),r.a.createElement(ie.a,{id:"handle",name:"handle",type:"text",helperText:l.errors.handle,error:!!l.errors.handle,label:"User Handle",className:i.textField,onChange:c,fullWidth:!0}),l.errors.general?r.a.createElement(j.a,{variant:"h5",className:i.customError},l.errors.general):r.a.createElement("span",null),"auth/user-not-found"===l.errors.error?r.a.createElement(j.a,{variant:"h5",className:i.customError},"User Not Found"):r.a.createElement("span",null),e.UI.loading?r.a.createElement("span",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("br",null),r.a.createElement(oe.a,{size:30,className:i.spinner})):r.a.createElement(q.a,{type:"submit",variant:"contained",className:i.button},"Sign Up"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("small",null,"Already have an account? ",r.a.createElement(s.b,{to:"/login"},"Login here")))),r.a.createElement(f.a,{item:!0,sm:!0}))})));var Ge={loginUser:function(e,a){return function(t){t({type:"LOADING_UI"}),A.a.post("/login",e).then((function(e){var n="Bearer ".concat(e.data.token);localStorage.setItem("FbIdToken",n),A.a.defaults.headers.common.Authorization=n,t(ke()),t({type:"CLEAR_ERRORS"}),a.push("/")})).catch((function(e){console.log(e),t({type:"SET_ERRORS",payload:e.response.data})}))}}},ze=Object(T.b)((function(e){return{user:e.user,UI:e.ui}}),Ge)(y()((function(e){return Object(Z.a)({},e.spreadableObject)}))((function(e){var a=Object(n.useState)({email:"",password:"",loading:!1,errors:{}}),t=Object(b.a)(a,2),l=t[0],o=t[1];Object(n.useEffect)((function(){null!==e.UI.errors&&o(Object(Z.a)({},l,{errors:e.UI.errors}))}),[e.UI.errors]);var c=function(e){o(Object(Z.a)({},l,Object(ce.a)({},e.target.name,e.target.value)))},i=e.classes;return r.a.createElement(f.a,{container:!0,className:i.form,alignContent:"center",justify:"center"},r.a.createElement(f.a,{item:!0,sm:!0}),r.a.createElement(f.a,{item:!0,sm:!0},r.a.createElement("img",{src:Ye.a,alt:"",width:"100",className:i.image}),r.a.createElement(j.a,{variant:"h4",className:i.pageTitle},"Login"),r.a.createElement("form",{noValidate:!0,onSubmit:function(a){a.preventDefault();var t={email:l.email,password:l.password};console.log(t),console.log(l),e.loginUser(t,e.history)}},r.a.createElement(ie.a,{id:"email",name:"email",type:"email",helperText:l.errors.email,error:!!l.errors.email,label:"Email",className:i.textField,onChange:c,fullWidth:!0}),r.a.createElement(ie.a,{id:"password",name:"password",type:"password",helperText:l.errors.password,error:!!l.errors.password,label:"password",className:i.textField,onChange:c,fullWidth:!0}),l.errors.general?r.a.createElement(j.a,{variant:"h5",className:i.customError},l.errors.general):r.a.createElement("span",null),"auth/user-not-found"===l.errors.error?r.a.createElement(j.a,{variant:"h5",className:i.customError},"User Not Found"):r.a.createElement("span",null),e.UI.loading?r.a.createElement("span",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("br",null),r.a.createElement(oe.a,{size:30,className:i.spinner})):r.a.createElement(q.a,{type:"submit",variant:"contained",className:i.button},"Login"),r.a.createElement("br",null),r.a.createElement("small",null,"Don't have account? ",r.a.createElement(s.b,{to:"/signup"},"Sign up here")))),r.a.createElement(f.a,{item:!0,sm:!0}))}))),Ke=t(254),Ve=t(255),Je=t(133),$e=t.n(Je),qe=t(80),Qe=t.n(qe),Xe=t(136),Ze=t(261),ea=t(253);var aa={markNotificationsRead:function(e){return function(a){A.a.post("/notifications/",e).then((function(){a({type:"MARK_NOTIFICATIONS_READ"})})).catch((function(e){console.log(e)}))}}},ta=Object(T.b)((function(e){return{notifications:e.user.notifications}}),aa)((function(e){var a=Object(n.useState)(null),t=Object(b.a)(a,2),l=t[0],o=t[1],c=e.notifications;I.a.extend(x.a);var i,m=function(){o(null)};i=c&&c.length>0&&c.filter((function(e){return!1===e.read})).length>0?r.a.createElement(ea.a,{badgeContent:c.filter((function(e){return!1===e.read})).length},r.a.createElement(Qe.a,null)):r.a.createElement(Qe.a,null);var u=c&&c.length>0?c.map((function(e){var a="like"===e.type?"liked":"commented on",t=I()(e.createdAt).fromNow(),n=e.read?"primary":"secondary",l="like"===e.type?r.a.createElement(B.a,{color:n,style:{marginRight:10}}):r.a.createElement(_.a,{color:n,style:{marginRight:10}});return r.a.createElement(Ze.a,{key:e.createdAt,onClick:m},l," ",r.a.createElement(j.a,{component:s.b,to:"/users/".concat(e.recipient,"/screams/").concat(e.screamId)},e.sender," ",a," your scream ",t))})):r.a.createElement(Ze.a,{onClick:m},"You have No Notifications");return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,{placement:"top",title:"Notifications"},r.a.createElement(M.a,{"aria-owns":l?"simple-menu":void 0,"aria-haspopup":"true",onClick:function(e){o(e.target)}},i)),r.a.createElement(Xe.a,{anchorEl:l,open:Boolean(l),onClose:m,onEntered:function(){var a=e.notifications.filter((function(e){return!e.read})).map((function(e){return e.notificationId}));e.markNotificationsRead(a)}},u))})),na=t(132),ra=t.n(na);var la={postScream:function(e){return function(a){a({type:"LOADING_UI"}),A.a.post("/scream",e).then((function(e){a({type:"POST_SCREAM",payload:e.data}),a(D())})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}}},oa=Object(T.b)((function(e){return{UI:e.ui}}),la)(y()((function(e){return Object(Z.a)({},e.spreadableObject,{postDialog:{position:"relative"},closeIcon:{top:"10%",left:"90%",position:"absolute"}})}))((function(e){var a=Object(n.useState)({body:"",errors:{}}),t=Object(b.a)(a,2),l=t[0],o=t[1],c=r.a.useState(!1),i=Object(b.a)(c,2),s=i[0],m=i[1],u=function(){o(Object(Z.a)({},l,{body:"",errors:{}})),m(!1)},d=e.classes;return r.a.createElement("div",null,r.a.createElement(L,{tipTitle:"Add Scream",onClick:function(){m(!0)}},r.a.createElement(ra.a,{color:"secondary"})),r.a.createElement(z.a,{open:s,onClose:u,fullWidth:!0,maxWidth:"sm",className:d.postDialog},r.a.createElement(K.a,null,"Scream Details"),r.a.createElement(le.a,{onClick:u,className:d.closeIcon}),r.a.createElement(ee.a,null,r.a.createElement(ie.a,{margin:"dense",autoFocus:!0,id:"body",name:"body",label:"Scream Body",onChange:function(e){o(Object(Z.a)({},l,Object(ce.a)({},e.target.name,e.target.value)))},type:"text",className:d.TextField,fullWidth:!0,value:l.body,multiline:!0,rows:"3",error:!!l.errors.body,helperText:l.errors.body})),r.a.createElement(V.a,null,r.a.createElement(q.a,{onClick:u,color:"primary"},"Cancel"),r.a.createElement(q.a,{onClick:function(){""!==l.body?(e.postScream(l),m(!1),o(Object(Z.a)({},l,{body:"",errors:{}}))):o(Object(Z.a)({},l,{errors:{body:"Scream Body Cannot be Empty"}}))},color:"primary"},"Submit"))))})));var ca=Object(T.b)((function(e){return{user:e.user}}))((function(e){var a=e.user.authenticated,t=r.a.createElement(n.Fragment,null,r.a.createElement(oa,null),r.a.createElement(L,{tipTitle:"Home"},r.a.createElement(s.b,{to:"/"},r.a.createElement($e.a,{color:"secondary"}))),r.a.createElement(ta,null)),l=r.a.createElement(n.Fragment,null,r.a.createElement(q.a,{color:"inherit",component:s.b,to:"/"},"Home"),r.a.createElement(q.a,{color:"inherit",component:s.b,to:"/login"},"Login"),r.a.createElement(q.a,{color:"inherit",component:s.b,to:"/signup"},"Sign Up"));return r.a.createElement("div",null,r.a.createElement(Ke.a,{title:"Rooster"},r.a.createElement("h3",{style:{color:"white",position:"absolute",left:45,top:0}},"Rooster"),r.a.createElement("img",{src:Ye.a,style:{width:35,position:"absolute",left:15,top:14},alt:""}),r.a.createElement(Ve.a,{className:"nav-container"},a?t:l)))})),ia=t(2),sa=Object(T.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var a=e.component,t=e.authenticated,n=Object(ia.a)(e,["component","authenticated"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){return!0===t?r.a.createElement(m.a,{to:"/"}):r.a.createElement(a,e)}}))})),ma=t(45),ua=t(134),da=t(21),pa={authenticated:!1,credentials:{},likes:[],notifications:[],loading:!1},Ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AUTHENTICATED":return Object(Z.a)({},e,{authenticated:!0,loading:!1});case"SET_UNAUTHENTICATED":return pa;case"SET_USER":return Object(Z.a)({authenticated:!0,loading:!1},a.payload);case"LOADING_USER":return Object(Z.a)({},e,{loading:!0});case"LIKE_SCREAM":return console.log("like Scream from userReducer"),Object(Z.a)({},e,{likes:[].concat(Object(da.a)(e.likes),[{userHandle:e.credentials.handle,screamId:a.payload.screamId}])});case"UNLIKE_SCREAM":return Object(Z.a)({},e,{likes:e.likes.filter((function(e){return e.screamId!==a.payload.screamId}))});case"MARK_NOTIFICATIONS_READ":return e.notifications.forEach((function(e){return e.read=!0})),Object(Z.a)({},e);default:return e}},ga={screams:[],scream:{},loading:!1},ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOADING_DATA":return console.log("loadingData"),Object(Z.a)({},e,{loading:!0});case"SET_SCREAMS":return console.log("SetScream"),Object(Z.a)({},e,{screams:a.payload,loading:!1});case"DELETE_SCREAM":return console.log("delete reducer called"),Object(Z.a)({},e,{screams:e.screams.filter((function(e){return e.screamId!==a.payload}))});case"POST_SCREAM":return Object(Z.a)({},e,{screams:[Object(Z.a)({},a.payload)].concat(Object(da.a)(e.screams))});case"SET_SCREAM":return Object(Z.a)({},e,{scream:Object(Z.a)({},a.payload)});case"LIKE_SCREAM":case"UNLIKE_SCREAM":var t=e.screams.findIndex((function(e){return e.screamId===a.payload.screamId}));return e.screams[t]=a.payload,console.log("like Scream from DataReducer"),Object(Z.a)({},e);case"POST_COMMENT":var n=e.screams.findIndex((function(e){return e.screamId===a.payload.screamId}));return e.screams[n].commentCount=e.screams[n].commentCount+1,e.scream.commentCount=e.scream.commentCount+1,e.scream.comments=[a.payload].concat(Object(da.a)(e.scream.comments)),console.log(e),Object(Z.a)({},e);default:return e}},fa={loading:!1,errors:null},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ERRORS":return Object(Z.a)({},e,{loading:!1,errors:a.payload});case"CLEAR_ERRORS":return Object(Z.a)({},e,{loading:!1,errors:null});case"LOADING_UI":return Object(Z.a)({},e,{loading:!0});case"STOP_LOADING_UI":return Object(Z.a)({},e,{loading:!1});default:return e}},ya=[ua.a],va=Object(ma.c)({user:Ea,data:ba,ui:ha}),Oa=Object(ma.e)(va,{},Object(ma.d)(ma.a.apply(void 0,ya)));var Sa=y()((function(e){return Object(Z.a)({},e.spreadThis,{paper:{padding:20},profile:{"& .image-wrapper":{textAlign:"center",position:"relative","& button":{position:"absolute",top:"80%",left:"70%"}},"& .profile-image":{width:150,height:150,objectFit:"cover",maxWidth:"100%",borderRadius:"50%"},"& .profile-details":{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:e.palette.primary.main}},"& hr":{border:"none",margin:"0 0 10px 0"}}})}))((function(e){var a=e.classes,t=e.profile;return r.a.createElement(Ce.a,{className:a.paper},r.a.createElement("div",{className:a.profile},r.a.createElement("div",{className:"image-wrapper",style:{textAlign:"center"}},r.a.createElement("img",{src:t.imageUrl,className:"profile-image",alt:""})),r.a.createElement("br",null),r.a.createElement("div",{className:"profile-details",style:{textAlign:"center"}},r.a.createElement(ge.a,{component:s.b,to:"/users/".concat(t.handle),color:"primary",variant:"h6"},"@",t.handle),t.bio&&r.a.createElement(j.a,{variant:"body2"},t.bio),r.a.createElement("br",null),t.location&&r.a.createElement(n.Fragment,null,r.a.createElement(fe.a,{color:"primary"}),r.a.createElement("span",null,t.location)),r.a.createElement("br",null),t.website&&r.a.createElement(n.Fragment,null,r.a.createElement(ye.a,{color:"primary"}),r.a.createElement("a",{href:t.website,target:"_blank",rel:"noopener noreferrer"}," ",t.website)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Ie.a,{color:"primary"}),r.a.createElement("span",null,I()(t.createdAt).format("MMM YYYY")))))}));var ja=Object(T.b)((function(e){return{data:e.data}}),{getUserDataFromHandle:function(e){return function(a){a({type:"LOADING_DATA"}),A.a.get("/user/".concat(e)).then((function(e){a({type:"SET_SCREAMS",payload:e.data.screams})})).catch((function(){a({type:"SET_SCREAMS",payload:null})}))}}})((function(e){var a=Object(n.useState)({profile:null,screamIdParam:null}),t=Object(b.a)(a,2),l=t[0],o=t[1];Object(n.useEffect)((function(){var a=e.match.params.handle,t=e.match.params.screamId;console.log(t),console.log(e),t&&o(Object(Z.a)({},l,{screamIdParam:t})),e.getUserDataFromHandle(a),A.a.get("/user/".concat(a)).then((function(e){o({profile:e.data.user})})).catch((function(e){console.log(e)}))}),[e.match.params.screamId]);var c=e.data.screams,i=e.data.loading?r.a.createElement(Fe,null):null===c?r.a.createElement("p",null,"No Screams YET"):l.screamIdParam?c.map((function(e){return e.screamId!==l.screamIdParam?(console.log("normal Scream page"),r.a.createElement(Ee,{key:e.screamId,screamData:e})):(console.log("screams page with Dialog"),r.a.createElement(Ee,{key:e.screamId,screamData:e,openDialog:!0}))})):c.map((function(e){return r.a.createElement(Ee,{key:e.screamId,screamData:e})}));return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,spacing:3,alignContent:"center",justify:"center"},r.a.createElement(f.a,{component:Me.a,item:!0,xs:11,display:{xs:"block",md:"none"}},null===l.profile?r.a.createElement(we,null):r.a.createElement(Sa,{profile:l.profile})),r.a.createElement(f.a,{item:!0,sm:8,xs:11},i),r.a.createElement(f.a,{component:Me.a,item:!0,md:4,display:{xs:"none",md:"block"}},null===l.profile?r.a.createElement(we,null):r.a.createElement(Sa,{profile:l.profile}))))})),Na=(d()(),g()({palette:{primary:{light:"#8eacbb",main:"#607d8b",dark:"#34515e",contrastText:"#fafafa"},secondary:{light:"#efefef",main:"#bdbdbd",dark:"#8d8d8d",contrastText:"#000000"}},spreadableObject:{invisibleSeparator:{border:"none",margin:4},visibleSeparator:{width:"100%",borderBottom:"1px solid rgba(0,0,0,0.1)",marginBottom:20},typography:{useNextVariants:!0},pageTitle:{},form:{textAlign:"center"},image:{},textField:{margin:"10px auto 10px auto"},button:{position:"relative"},customError:{color:"red",fontSize:".8rem",margin:15},spinner:{}}}));A.a.defaults.baseURL="https://us-central1-rooster-a8505.cloudfunctions.net/api";var Ia=localStorage.FbIdToken;if(console.log(Ia),Ia){var Ca=i()(Ia);console.log(Ca),1e3*Ca.exp<Date.now()?(Oa.dispatch(Ae()),window.location.href="/login"):(Oa.dispatch({type:"SET_AUTHENTICATED"}),A.a.defaults.headers.common.Authorization=Ia,Oa.dispatch(ke()))}else console.log("No Token");var xa=function(){return r.a.createElement(p.a,{theme:Na},r.a.createElement(T.a,{store:Oa},r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(ca,null),r.a.createElement("div",{className:"container"},r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/rooster",component:We}),r.a.createElement(sa,{exact:!0,path:"/login",component:ze}),r.a.createElement(sa,{exact:!0,path:"/signup",component:He}),r.a.createElement(m.b,{exact:!0,path:"/users/:handle",component:ja}),r.a.createElement(m.b,{exact:!0,path:"/users/:handle/screams/:screamId",component:ja}),r.a.createElement("h1",null,"Rooster")))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(xa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},54:function(e,a,t){e.exports=t.p+"static/media/rooster.166758d0.png"},75:function(e,a,t){e.exports=t.p+"static/media/default-image.5a021ab9.png"}},[[156,1,2]]]);
//# sourceMappingURL=main.2bf32b6a.chunk.js.map